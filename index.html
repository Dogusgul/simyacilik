<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Simya Dükkanı</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background-color: #f4f4f4;
    margin: 0;
    padding: 20px;
  }
  .game-container {
    max-width: 1200px;
    margin: 0 auto;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    padding: 20px;
  }
  h1 {
    color: #2c3e50;
    margin-bottom: 10px;
  }
  .materials {
    margin: 20px 0;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    justify-items: center;
  }
  .material {
    font-size: 16px;
    cursor: pointer;
    padding: 10px;
    background-color: #f39c12;
    border-radius: 10px;
    transition: transform 0.3s;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100px;
    height: 100px;
    text-align: center;
    box-sizing: border-box;
    user-select: none;
  }
  .material div:first-child {
    font-size: 40px;
    margin-bottom: 6px;
  }
  .material:hover {
    transform: scale(1.1);
  }
  .cauldron {
    margin: 20px auto 10px;
    background-color: #2c3e50;
    border-radius: 50%;
    width: 200px;
    height: 200px;
    border: 5px solid #f39c12;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .cauldron h2 {
    margin: 0 0 10px;
  }
  .cauldron-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    max-width: 150px;
  }
  .cauldron-content div {
    font-size: 40px;
    margin: 3px;
    user-select: none;
  }
  #boil-btn {
    background-color: #e74c3c;
    color: white;
    padding: 10px 25px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    margin: 10px auto 20px;
    display: block;
  }
  #boil-btn:hover {
    background-color: #c0392b;
  }
  .inventory {
    background-color: #2ecc71;
    padding: 15px 20px;
    border-radius: 10px;
    margin-bottom: 20px;
    min-height: 50px;
  }
  .inventory h2 {
    margin: 0 0 10px;
    color: #1a472a;
  }
  .inventory div {
    background-color: #27ae60;
    padding: 6px 12px;
    border-radius: 5px;
    color: white;
    margin: 3px 8px;
    display: inline-block;
    user-select: none;
  }
  #error-message {
    background-color: #e74c3c;
    color: white;
    padding: 10px;
    font-size: 18px;
    margin: 0 auto 10px;
    max-width: 400px;
    border-radius: 6px;
    display: none;
    user-select: none;
  }
  #money {
    font-size: 20px;
    color: #2c3e50;
    margin-bottom: 10px;
    user-select: none;
  }
  .customer {
    margin-top: 120px;
    cursor: pointer;
    display: inline-block;
    position: relative;
    font-size: 80px;
    user-select: none;
  }
  .speech-bubble {
    position: absolute;
    top: -120px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #3498db;
    padding: 8px 12px;
    border-radius: 8px;
    color: white;
    font-size: 14px;
    max-width: 220px;
    white-space: normal;
    word-wrap: break-word;
    line-height: 1.3;
    box-sizing: border-box;
    z-index: 10;
  }
  #recipe-button {
    background-color: #2980b9;
    color: white;
    padding: 10px 25px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    margin-bottom: 10px;
  }
  #recipe-button:hover {
    background-color: #3498db;
  }
  .recipe-container {
    display: none;
    background-color: #fff;
    border-radius: 10px;
    padding: 15px 20px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    max-width: 600px;
    margin: 0 auto 20px;
    user-select: none;
    text-align: left;
    overflow-wrap: break-word;
  }
  .recipe-item {
    font-size: 18px;
    margin: 6px 0;
  }
  .recipe-item span {
    font-weight: bold;
    margin-right: 6px;
  }
</style>
</head>
<body>
  <div class="game-container">
    <h1>Simya Dükkanı</h1>

    <div id="error-message">Bu tarif işe yaramaz!</div>
    <div id="money">Para: 0 TL</div>
<!-- İksir Tarifleri Butonu -->
<button id="recipe-button" onclick="showRecipes()">İksir Tarifleri</button>

<!-- Tarifler Kutusu -->
<div id="recipe-container" class="recipe-container" style="display:none;">
  <div class="recipe-item"><span>Sağlık İksiri:</span> 🐞 + 🌸</div>
  <div class="recipe-item"><span>Hız İksiri:</span> 🐜 + 🌸</div>
  <div class="recipe-item"><span>Güç İksiri:</span> 🐞 + 🐜</div>
  <div class="recipe-item"><span>Büyü İksiri:</span> 🔮 + 🌸</div>
  <div class="recipe-item"><span>Ateş İksiri:</span> 🔥 + 🐞</div>
  <div class="recipe-item"><span>Su İksiri:</span> 💧 + 🐜</div>
  <div class="recipe-item"><span>Yılan İksiri:</span> 🐍 + ✨</div>
  <div class="recipe-item"><span>Ay Işığı İksiri:</span> 🌙 + 🔮</div>
  <div class="recipe-item"><span>Zehir İksiri:</span> 🍄 + 🔮</div>
  <div class="recipe-item"><span>Buz İksiri:</span> 🍄 + 💧</div>
  <div class="recipe-item"><span>Zenginlik İksiri:</span> ✨ + 🍄</div>
  <div class="recipe-item"><span>Zihin Gücü İksiri:</span> 🌙 + ✨</div>
  <div class="recipe-item"><span>Enerji İksiri:</span> 🔥 + 🍄</div>
</div>
    <div class="materials">
      <div class="material" onclick="addToCauldron('Uğur Böceği')">
        <div>🐞</div><div>Uğur Böceği</div>
      </div>
      <div class="material" onclick="addToCauldron('Çiçek')">
        <div>🌸</div><div>Çiçek</div>
      </div>
      <div class="material" onclick="addToCauldron('Karınca')">
        <div>🐜</div><div>Karınca</div>
      </div>
      <div class="material" onclick="addToCauldron('Büyülü Taş')">
        <div>🔮</div><div>Büyülü Taş</div>
      </div>
      <div class="material" onclick="addToCauldron('Su Damlası')">
        <div>💧</div><div>Su Damlası</div>
      </div>
      <div class="material" onclick="addToCauldron('Ateş')">
        <div>🔥</div><div>Ateş</div>
      </div>
      <div class="material" onclick="addToCauldron('Yılan')">
        <div>🐍</div><div>Yılan</div>
      </div>
      <div class="material" onclick="addToCauldron('Büyülü Toz')">
        <div>✨</div><div>Büyülü Toz</div>
      </div>
      <div class="material" onclick="addToCauldron('Ay Işığı')">
        <div>🌙</div><div>Ay Işığı</div>
      </div>
      <div class="material" onclick="addToCauldron('Zehirli Mantar')">
        <div>🍄</div><div>Zehirli Mantar</div>
      </div>
    </div>

    <div class="cauldron">
      <h2>Kazan</h2>
      <div id="cauldron-content" class="cauldron-content">Henüz malzeme eklemediniz.</div>
    </div>

    <button id="boil-btn" onclick="boilIngredients()">Kaynat</button>

    <div class="inventory">
      <h2>Envanter</h2>
      <div id="inventory-content"></div>
    </div>
        <div id="customers"></div>
  </div>

  <audio id="material-sound" src="sounds/material-click.mp3"></audio>
  <audio id="boil-sound" src="sounds/boil-click.mp3"></audio>
  <audio id="customer-sound" src="sounds/customer-click.mp3"></audio>

  <script>
    const availableEmojis = ['👩🏻', '👨🏽', '👩🏿‍🦱', '👨🏼', '👵🏻', '👴🏽', '🧑🏻', '🧑🏼', '🧑🏽', '👩🏽', '👨🏻'];
    const availablePotions = [
      'Sağlık İksiri',
      'Hız İksiri',
      'Güç İksiri',
      'Büyü İksiri',
      'Ateş İksiri',
      'Su İksiri',
      'Yılan İksiri',
      'Ay Işığı İksiri',
      'Zehir İksiri',
      'Buz İksiri',
      'Zenginlik İksiri',
      'Zihin Gücü İksiri',
      'Enerji İksiri'
    ];

    const stories = {
      'Sağlık İksiri': [
        "Sonunda sağlığıma kavuşacağım! O kadar uzun zamandır hastaydım ki, bir yudum Sağlık İksiri her şeyi değiştirecek!",
        "Gece boyunca uyumadım, bedenim yorgun. Sağlık İksiri bana yeniden güç verebilir mi?"
      ],
      'Hız İksiri': [
        "Çok acelem var! Hızlıca görevimi tamamlamak zorundayım, belki bu iksir bana yardımcı olur.",
        "Yavaş olmak zorunda değilim! Hız İksiriyle hızlıca gitmem gereken yere ulaşacağım."
      ],
      'Güç İksiri': [
        "Fiziksel gücümü artırmam gerekiyor, bir mücadeleye hazırlık yapıyorum ve bu iksir bana büyük bir avantaj sağlar.",
        "Yıllardır güçsüz hissediyorum, bir miktar güç kazanmak artık elzem oldu."
      ],
      'Büyü İksiri': [
        "Büyü yapmak istiyorum, ama gücüm yetmiyor! Bu iksir beni büyü yeteneklerimi geliştirebilir.",
        "Bir büyücü olmayı hep hayal ettim. Belki bu iksirle o hayalim gerçek olur."
      ],
      'Ateş İksiri': [
        "Bazen ateş, ruhumu ısıtacak tek şey oluyor. Biraz da cesaret isterim, bu iksir bana yardımcı olabilir.",
        "Bunu almak zorundayım! Ateşin gücünü hissetmek ve çevremdeki dünyayı aydınlatmak istiyorum."
      ],
      'Zihin Gücü İksiri': [
        "Zihinsel engellerim var, bu iksirle düşünme kapasitemi artırıp sorunları çözmeyi umuyorum.",
        "Bazen zihnim çok dağılmış hissediyorum, bu iksir bana netlik ve odaklanma sağlayacak."
      ],
      'Zehir İksiri': [
        "Zehir, çok güçlü bir silah olabilir... ama sadece doğru şekilde kullanıldığında. Bu iksir, düşmanlarımı etkisiz hale getirebilir.",
        "Bazen bazı şeyleri yok etmem gerek, bu zehir iksiriyle her şeyi temizleyeceğim."
      ],
      'Buz İksiri': [
        "Bazen soğukkanlılık her şeydir, bu Buz İksiri sayesinde zor anları daha kolay atlatabilirim.",
        "Sıcak bir ortamda çok zorlandım, bu iksirle biraz serinlik bulabilirim."
      ]
    };

    let cauldronContents = [];
    let inventory = {};
    let money = 0;
    let currentCustomerPotion = null;

    function playSound(soundId) {
      const sound = document.getElementById(soundId);
      if(sound){
        sound.currentTime = 0;
        sound.play();
      }
    }

    function addToCauldron(item) {
      cauldronContents.push(item);
      updateCauldronContent();
      playSound('material-sound');
    }

    function updateCauldronContent() {
      const div = document.getElementById('cauldron-content');
      div.innerHTML = '';
      if (cauldronContents.length === 0) {
        div.textContent = 'Henüz malzeme eklemediniz.';
        return;
      }
      cauldronContents.forEach(item => {
        const emojiDiv = document.createElement('div');
        emojiDiv.textContent = getEmojiForMaterial(item);
        div.appendChild(emojiDiv);
      });
    }

    function getEmojiForMaterial(item) {
      switch(item) {
        case 'Uğur Böceği': return '🐞';
        case 'Çiçek': return '🌸';
        case 'Karınca': return '🐜';
        case 'Büyülü Taş': return '🔮';
        case 'Su Damlası': return '💧';
        case 'Ateş': return '🔥';
        case 'Yılan': return '🐍';
        case 'Büyülü Toz': return '✨';
        case 'Ay Işığı': return '🌙';
        case 'Zehirli Mantar': return '🍄';
        default: return '';
      }
    }

    function boilIngredients() {
      const potion = createPotion(cauldronContents);
      if (potion) {
        inventory[potion] = (inventory[potion] || 0) + 1;
        cauldronContents = [];
        updateCauldronContent();
        updateInventory();
        playSound('boil-sound');
      } else {
        showError();
        cauldronContents = [];
        updateCauldronContent();
      }
    }

    function createPotion(ingredients) {
      const sorted = [...ingredients].sort();
      if (sorted.length !== 2) return null;

      const combos = {
        'Çiçek,Uğur Böceği': 'Sağlık İksiri',
        'Çiçek,Karınca': 'Hız İksiri',
        'Karınca,Uğur Böceği': 'Güç İksiri',
        'Büyülü Taş,Çiçek': 'Büyü İksiri',
        'Ateş,Uğur Böceği': 'Ateş İksiri',
        'Karınca,Su Damlası': 'Su İksiri',
        'Büyülü Toz,Yılan': 'Yılan İksiri',
        'Ay Işığı,Büyülü Taş': 'Ay Işığı İksiri',
        'Büyülü Taş,Zehirli Mantar': 'Zehir İksiri',
        'Su Damlası,Zehirli Mantar': 'Buz İksiri',
        'Büyülü Toz,Zehirli Mantar': 'Zenginlik İksiri',
        'Ay Işığı,Büyülü Toz': 'Zihin Gücü İksiri',
        'Ateş,Zehirli Mantar': 'Enerji İksiri'
      };

      const key = sorted.join(',');
      return combos[key] || null;
    }

    function updateInventory() {
      const container = document.getElementById('inventory-content');
      container.innerHTML = '';
      Object.entries(inventory).forEach(([potion, count]) => {
        if (count > 0) {
          const div = document.createElement('div');
          div.textContent = `${potion}: ${count}`;
          container.appendChild(div);
        }
      });
    }

    function showError() {
      const error = document.getElementById('error-message');
      error.style.display = 'block';
      setTimeout(() => { error.style.display = 'none'; }, 5000);
    }

    function getRandomPotion() {
      const i = Math.floor(Math.random() * availablePotions.length);
      return availablePotions[i];
    }

    function getRandomEmoji() {
      const i = Math.floor(Math.random() * availableEmojis.length);
      return availableEmojis[i];
    }

    function showCustomer(potion) {
      const customerDiv = document.getElementById('customers');
      customerDiv.innerHTML = '';

      const cust = document.createElement('div');
      cust.classList.add('customer');
      const emoji = getRandomEmoji();

      cust.innerHTML = `
        <div class="speech-bubble">${potion} lütfen!</div>
        <div>${emoji}</div>
      `;

      if (Math.random() < 0.3 && stories[potion]) {
        const story = stories[potion][Math.floor(Math.random() * stories[potion].length)];
        cust.innerHTML += `<div class="speech-bubble" style="top:-140px;">${story}</div>`;
      }

      cust.onclick = () => sellPotion(potion);
      customerDiv.appendChild(cust);

      currentCustomerPotion = potion;
      saveGameData();
      playSound('customer-sound');
    }

    function showNextCustomer() {
      showCustomer(getRandomPotion());
    }

    function sellPotion(potion) {
      if (inventory[potion] && inventory[potion] > 0) {
        inventory[potion]--;
        money += 50;
        updateInventory();
        document.getElementById('money').textContent = `Para: ${money} TL`;
        saveGameData();

        currentCustomerPotion = null;
        saveGameData();

        showNextCustomer();
      } else {
        alert(`Maalesef, elimizde ${potion} yok!`);
      }
    }

    function showRecipes() {
      const rc = document.getElementById('recipe-container');
      rc.style.display = (rc.style.display === 'block') ? 'none' : 'block';
    }

    function loadGameData() {
      money = parseInt(localStorage.getItem('money')) || 0;
      inventory = JSON.parse(localStorage.getItem('inventory')) || {};
      currentCustomerPotion = localStorage.getItem('currentCustomerPotion') || null;
      updateInventory();
      document.getElementById('money').textContent = `Para: ${money} TL`;

      if (currentCustomerPotion) {
        showCustomer(currentCustomerPotion);
      } else {
        showNextCustomer();
      }
    }

    function saveGameData() {
      localStorage.setItem('money', money);
      localStorage.setItem('inventory', JSON.stringify(inventory));
      localStorage.setItem('currentCustomerPotion', currentCustomerPotion);
    }

    window.onload = loadGameData;
  </script>
</body>
</html>
